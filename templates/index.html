<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Chat with GPT</title>
	<style>
		body {
			background-color: #171717;
			color: #FFF;
			font-family: Arial, sans-serif;
			font-size: 16px;
			line-height: 1.5;
			margin: 0;
		}
		.container {
			height: 100vh;
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
		}
		.box {
			background-color: #1E1E1E;
			border-radius: 15px;
			padding: 20px;
			display: flex;
			flex-direction: column;
			max-width: 550px;
			width: 100%;
			box-shadow: 0px 0px 20px rgba(0,0,0,0.25);
		}
		.header {
			font-weight: bold;
			font-size: 24px;
			margin-bottom: 20px;
			text-align: center;
		}
		.message {
			margin-bottom: 15px;
			display: flex;
			flex-direction: column;
			align-items: flex-start;
		}
		.from-gpt {
			background-color: #4C4C4C;
			color: #FFF;
			align-self: flex-start;
			border-radius: 10px;
			padding: 10px;
			margin-bottom: 10px;
			width: 100%;
		}
		.from-user {
			background-color: #6D6D6D;
			color: #FFF;
			align-self: flex-end;
			border-radius: 10px;
			padding: 10px;
			margin-bottom: 10px;
			width: 100%;
		}
		.input-wrapper {
			display: flex;
			margin-top: 15px;
		}
		input[type="text"] {
			background-color: #2B2B2B;
			border: none;
			border-radius: 10px;
			color: #FFF;
			font-family: Arial, sans-serif;
			font-size: 16px;
			height: 40px;
			padding: 10px;
			width: 100%;
		}
		input[type="submit"] {
			background-color: #4C4C4C;
			border: none;
			border-radius: 10px;
			color: #FFF;
			cursor: pointer;
			font-family: Arial, sans-serif;
			font-size: 16px;
			height: 40px;
			margin-left: 10px;
			padding: 0px 20px;
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="box">
			<div class="header">Chat with GPT-3</div>
			<div class="message from-gpt">Hello, I am GPT-3. How can I help you today?</div>
			<form id="chat-form">
				<div class="input-wrapper">
					<input type="text" id="user-message" placeholder="Type your message here...">
					<input type="submit" value="Send" onclick="sendMessage()">
				</div>
			</form>
		</div>
	</div>
	<script>
		const form = document.querySelector('#chat-form');
		const userInput = document.querySelector('#user-message');
		const chatBox = document.querySelector('.box');

		form.addEventListener('submit', (event) => {
			event.preventDefault();
			const userMessage = userInput.value;
			addMessage('user', userMessage);
			getResponse(userMessage);
			userInput.value = '';
		});

		function getResponse(userMessage) {
			const requestOptions = {
			    method: 'POST',
			    headers: { 'Content-Type': 'application/json' },
			    body: JSON.stringify({ 'input': userMessage })
			};
			fetch('http://localhost:8000/gpt3', requestOptions)
			    .then(response => response.json())
			    .then(data => {
			    	addMessage('gpt', data.output);
			    })
			    .catch(error => {
			        console.log('Error:', error);
			        addMessage('gpt', '123There was an error. Please try again later.');
			    });
		}

		function addMessage(from, message) {
			const messageBox = document.createElement('div');
			const messageText = document.createElement('div');
			messageText.textContent = message;
			messageBox.appendChild(messageText);
			messageBox.classList.add('message');
			if (from === 'user') {
				messageBox.classList.add('from-user');
			} else if (from === 'gpt') {
				messageBox.classList.add('from-gpt');
			}
			chatBox.insertBefore(messageBox, form);
			chatBox.scrollTop = chatBox.scrollHeight;
		}
	</script>
</body>
</html>